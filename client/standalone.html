<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quản lý Người đóng góp - Ứng dụng độc lập</title>
  <style>
    :root {
      --bg-color: #f9f9f9;
      --text-color: #333;
      --primary-color: #4f46e5;
      --border-color: #e5e7eb;
      --error-color: #ef4444;
      --success-color: #10b981;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      margin: 0;
      padding: 0;
      line-height: 1.5;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 16px;
    }
    
    header {
      background-color: white;
      border-bottom: 1px solid var(--border-color);
      padding: 16px 0;
    }
    
    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    h1 {
      font-size: 24px;
      margin: 0;
    }
    
    main {
      padding: 24px 0;
    }
    
    .card {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      padding: 24px;
      margin-bottom: 24px;
    }
    
    .btn {
      display: inline-block;
      padding: 8px 16px;
      border-radius: 4px;
      background-color: var(--primary-color);
      color: white;
      text-decoration: none;
      font-weight: 500;
      border: none;
      cursor: pointer;
    }
    
    .btn:hover {
      opacity: 0.9;
    }
    
    .btn-secondary {
      background-color: #f3f4f6;
      color: #1f2937;
    }
    
    .error-message {
      color: var(--error-color);
      background-color: #fee2e2;
      padding: 12px;
      border-radius: 4px;
      margin-bottom: 16px;
    }
    
    .success-message {
      color: var(--success-color);
      background-color: #d1fae5;
      padding: 12px;
      border-radius: 4px;
      margin-bottom: 16px;
    }
  </style>
</head>
<body>
  <header>
    <div class="container header-content">
      <h1>Quản lý Người đóng góp</h1>
    </div>
  </header>
  
  <main class="container">
    <div class="card">
      <h2>Ứng dụng Quản lý Người đóng góp Độc lập</h2>
      <p>
        Chào mừng bạn đến với ứng dụng quản lý người đóng góp độc lập. Ứng dụng này cho phép bạn:
      </p>
      <ul>
        <li>Xem danh sách tất cả người đóng góp</li>
        <li>Thêm người đóng góp mới</li>
        <li>Cập nhật thông tin người đóng góp hiện có</li>
        <li>Xóa người đóng góp</li>
      </ul>
      
      <p>
        Ứng dụng này hoạt động độc lập với phần còn lại của hệ thống, nhưng vẫn sử dụng cùng API và cơ sở dữ liệu.
      </p>
      
      <a href="/standalone-app/" class="btn">Mở ứng dụng Quản lý Người đóng góp</a>
    </div>
    
    <div class="card">
      <h3>Hướng dẫn sử dụng</h3>
      <ol>
        <li>Nhấp vào nút "Mở ứng dụng Quản lý Người đóng góp" ở trên.</li>
        <li>Đăng nhập bằng tài khoản quản trị của bạn.</li>
        <li>Sử dụng các chức năng quản lý người đóng góp.</li>
      </ol>
      
      <p>
        <strong>Lưu ý:</strong> Ứng dụng này yêu cầu quyền quản trị viên để thực hiện các thao tác thêm, sửa, xóa.
      </p>
    </div>
  </main>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Xử lý sự kiện khi nhấp vào nút mở ứng dụng
      document.querySelector('.btn').addEventListener('click', function(e) {
        e.preventDefault();
        
        // Kiểm tra xem máy chủ có sẵn sàng không
        fetch('/api/contributors')
          .then(response => {
            if (response.ok) {
              // Chuyển hướng đến ứng dụng độc lập
              window.location.href = '/client/src/index-standalone.html';
            } else {
              // Hiển thị thông báo lỗi
              const errorDiv = document.createElement('div');
              errorDiv.className = 'error-message';
              errorDiv.textContent = 'Không thể kết nối đến máy chủ. Vui lòng thử lại sau.';
              
              document.querySelector('.card').appendChild(errorDiv);
              
              // Tự động xóa thông báo sau 5 giây
              setTimeout(() => {
                errorDiv.remove();
              }, 5000);
            }
          })
          .catch(error => {
            console.error('Lỗi kết nối:', error);
            
            // Hiển thị thông báo lỗi
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.textContent = 'Không thể kết nối đến máy chủ. Vui lòng thử lại sau.';
            
            document.querySelector('.card').appendChild(errorDiv);
            
            // Tự động xóa thông báo sau 5 giây
            setTimeout(() => {
              errorDiv.remove();
            }, 5000);
          });
      });
    });
  </script>
</body>
</html>