<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1"
    />
    <!-- Primary Meta Tags -->
    <title>Lịch Sử Việt Nam | Từ Thời Vua Hùng Đến Hiện Đại</title>
    <meta
      name="title"
      content="Lịch Sử Việt Nam | Từ Thời Vua Hùng Đến Hiện Đại"
    />
    <meta
      name="description"
      content="Khám phá hành trình lịch sử Việt Nam qua các thời kỳ từ thời Vua Hùng đến hiện đại với những sự kiện, nhân vật và di tích lịch sử nổi bật."
    />
    <meta
      name="keywords"
      content="lịch sử Việt Nam, thời kỳ lịch sử, Vua Hùng, nhân vật lịch sử, di tích lịch sử, văn hóa Việt Nam, dòng thời gian lịch sử"
    />
    <meta name="author" content="lichsuviet.edu.vn" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="Vietnamese" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://lichsuviet.edu.vn/" />
    <meta
      property="og:title"
      content="Lịch Sử Việt Nam | Từ Thời Vua Hùng Đến Hiện Đại"
    />
    <meta
      property="og:description"
      content="Khám phá hành trình lịch sử Việt Nam qua các thời kỳ từ thời Vua Hùng đến hiện đại với những sự kiện, nhân vật và di tích lịch sử nổi bật."
    />
    <meta
      property="og:image"
      content="https://lichsuviet.edu.vn/uploads/banner-image.png"
    />
    <meta property="og:site_name" content="Lịch Sử Việt Nam" />
    <meta property="og:locale" content="vi_VN" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://lichsuviet.edu.vn/" />
    <meta
      property="twitter:title"
      content="Lịch Sử Việt Nam | Từ Thời Vua Hùng Đến Hiện Đại"
    />
    <meta
      property="twitter:description"
      content="Khám phá hành trình lịch sử Việt Nam qua các thời kỳ từ thời Vua Hùng đến hiện đại với những sự kiện, nhân vật và di tích lịch sử nổi bật."
    />
    <meta
      property="twitter:image"
      content="https://lichsuviet.edu.vn/uploads/banner-image.png"
    />

    <!-- Mobile App Meta -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="Lịch Sử Việt Nam" />
    <meta name="application-name" content="Lịch Sử Việt Nam" />
    <meta name="theme-color" content="#CF2A27" />

    <!-- Canonical URL -->
    <link rel="canonical" href="https://lichsuviet.edu.vn/" />
    <style>
      .ql-container.ql-snow {
        max-height: 500px;
        overflow-y: scroll;
      }

      .ql-align-center {
        text-align: -webkit-center;
      }
    </style>
    <!-- Favicon is dynamically loaded from settings in App.tsx -->
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXX"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-GDN25M8C0N");
    </script>
  </head>
  <body>
    <div id="fb-root"></div>
    <script
      async
      defer
      crossorigin="anonymous"
      src="https://connect.facebook.net/vi_VN/sdk.js#xfbml=1&version=v22.0&appId=338293120972096"
    ></script>
    <div id="root"></div>
    <!-- Tùy chỉnh cách tải script module -->
    <script>
      // Kiểm tra lỗi MIME type và thử tải lại
      window.addEventListener('error', function(e) {
        // Chỉ log lỗi liên quan đến MIME type và module
        if ((e.message && (e.message.includes('MIME type') || e.message.includes('module specifier') || e.message.includes('Failed to fetch'))) && 
            (e.filename && e.filename.includes('main') || !e.filename)) {
          console.log('Phát hiện lỗi tải module, thử tải lại script...');
          // Thêm timestamp để tránh cache
          const timestamp = Date.now();
          setTimeout(function() {
            const script = document.createElement('script');
            script.type = 'module';
            script.setAttribute('crossorigin', 'anonymous');
            script.src = '/src/main.tsx?v=' + timestamp;
            document.body.appendChild(script);
          }, 1000);
        }
      }, true);
      
      // Sao lưu phương thức fetch
      const originalFetch = window.fetch;
      // Ghi đè phương thức fetch để xử lý lỗi MIME type
      window.fetch = function(url, options) {
        return originalFetch(url, options)
          .catch(error => {
            console.error('Lỗi khi fetch:', url, error);
            // Nếu là lỗi MIME type, thử lại với tham số cache-busting
            if (error.message && error.message.includes('MIME type')) {
              const bustCache = url.includes('?') ? '&_cb=' + Date.now() : '?_cb=' + Date.now();
              return originalFetch(url + bustCache, options);
            }
            throw error;
          });
      };
    </script>
    <script type="module" src="/src/main.tsx?v=20250516"></script>
  </body>
</html>
